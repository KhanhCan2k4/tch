import{a as w,r as U,l as N,c as i,f as r,g as n,t as u,j as h,m as k,p as T,F as E,q as P,s as f,w as ie,x as C,y as q,e as A,d as D,z,h as re,A as oe,B as le,C as de,D as Q,E as H,k as ce}from"./vue.esm-bundler-80489fb4.js";import{a as O}from"./axios-ba22fe77.js";const j=O.create({baseURL:"/api",headers:{Accept:"application/json"}});O.create({headers:{Accept:"application/json"}});j.interceptors.request.use(async e=>{let t=localStorage.getItem("admin_token");if(!t)try{const s=await fetch("/session/token",{method:"GET",headers:{Accept:"application/json"},credentials:"same-origin"});if(s.ok){const o=await s.json();o.success&&o.token&&(t=o.token,localStorage.setItem("admin_token",t))}}catch(s){console.error("KhÃ´ng thá»ƒ láº¥y token:",s)}return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));j.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(console.error("Unauthenticated - removing stored token"),localStorage.removeItem("admin_token")),Promise.reject(e)});function ue(e={}){const s={...{apiEndpoint:"",itemsPerPage:10,searchDelay:500,autoLoad:!0},...e},o=w(!1),c=w(null),a=w([]),l=w(""),m=w(null),g=w([]),$=w(!1),_=U({current_page:1,last_page:1,total:0,from:0,to:0,per_page:s.itemsPerPage}),v=U({show:!1,type:"success",text:""}),M=N(()=>a.value.length>0),b=N(()=>g.value.length>0),L=N(()=>g.value.length===a.value.length&&a.value.length>0),x=N(()=>({"border-green-200":v.type==="success","border-red-200":v.type==="error","border-yellow-200":v.type==="warning","border-blue-200":v.type==="info"})),Y=N(()=>{const d="text-xl ";switch(v.type){case"success":return d+"bi-check-circle-fill text-green-500";case"error":return d+"bi-exclamation-triangle-fill text-red-500";case"warning":return d+"bi-exclamation-triangle-fill text-yellow-500";default:return d+"bi-info-circle-fill text-blue-500"}}),B=async(d=1)=>{if(!s.apiEndpoint){console.warn("DataTable: No API endpoint configured");return}o.value=!0,c.value=null;try{const p=await j.get(s.apiEndpoint,{params:{page:d,search:l.value,per_page:_.per_page}});a.value=p.data.data,Object.assign(_,{current_page:p.data.current_page,last_page:p.data.last_page,total:p.data.total,from:p.data.from,to:p.data.to,per_page:p.data.per_page}),g.value=[],$.value=!1}catch(p){console.error("Error loading data:",p),c.value="Failed to load data. Please try again.",I("error","Failed to load data. Please try again.")}finally{o.value=!1}},J=()=>{clearTimeout(m.value),m.value=setTimeout(()=>{B(1)},s.searchDelay)},Z=d=>{d>=1&&d<=_.last_page&&B(d)},ee=()=>{$.value?g.value=a.value.map(d=>d.id):g.value=[]},te=async d=>{const p=d.name||d.title||"this item";if(confirm(`Are you sure you want to delete ${p}? This action cannot be undone.`))try{await j.delete(`${s.apiEndpoint}/${d.id}`),a.value=a.value.filter(S=>S.id!==d.id),I("success","Item deleted successfully"),a.value.length===0&&_.current_page>1&&B(_.current_page-1)}catch(S){console.error("Error deleting item:",S),I("error","Failed to delete item. Please try again.")}},se=async()=>{if(g.value.length===0){I("warning","Please select items to delete");return}if(confirm(`Are you sure you want to delete ${g.value.length} items? This action cannot be undone.`))try{await j.post(`${s.apiEndpoint}/bulk-delete`,{ids:g.value}),I("success",`${g.value.length} items deleted successfully`),B(_.current_page)}catch(d){console.error("Error bulk deleting items:",d),I("error","Failed to delete items. Please try again.")}},I=(d,p)=>{v.show=!0,v.type=d,v.text=p,d==="success"&&setTimeout(()=>{v.show=!1},5e3)},ne=()=>{v.show=!1},ae=()=>{const d=[],p=_.current_page,S=_.last_page,F=2;for(let V=Math.max(p-F,1);V<=Math.min(p+F,S);V++)d.push(V);return d[0]>1&&(d[0]>2&&d.unshift("..."),d.unshift(1)),d[d.length-1]<S&&(d[d.length-1]<S-1&&d.push("..."),d.push(S)),d};return s.autoLoad&&B(),{loading:o,error:c,items:a,searchQuery:l,selectedItems:g,selectAll:$,pagination:_,message:v,hasItems:M,hasSelectedItems:b,isAllSelected:L,messageClasses:x,messageIconClass:Y,loadData:B,search:J,changePage:Z,toggleSelectAll:ee,deleteItem:te,bulkDelete:se,showMessage:I,hideMessage:ne,getPageNumbers:ae,updateSelectAll:()=>{$.value=L.value}}}const y=(e,t)=>{const s=e.__vccOpts||e;for(const[o,c]of t)s[o]=c;return s},me={name:"TableHeader",props:{title:{type:String,default:""},description:{type:String,default:""},searchQuery:{type:String,default:""},searchPlaceholder:{type:String,default:"Search..."},hasSelectedItems:{type:Boolean,default:!1},selectedCount:{type:Number,default:0},showExport:{type:Boolean,default:!0}},emits:["search","bulk-delete","export","refresh"]},ge={class:"data-table__header"},he={class:"flex items-center justify-between mb-4"},fe={key:0,class:"text-xl font-semibold text-gray-900"},pe={key:1,class:"mt-1 text-sm text-gray-600"},ye={key:0,class:"data-table__actions"},be={class:"data-table__search-bar mb-6"},ve={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},xe={class:"flex-1 max-w-md"},_e={class:"relative"},we=["value","placeholder"],Ce={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},ke={class:"flex items-center gap-3"},$e={key:0,class:"data-table__bulk-actions"};function Se(e,t,s,o,c,a){return i(),r("div",ge,[n("div",he,[n("div",null,[s.title?(i(),r("h2",fe,u(s.title),1)):h("",!0),s.description?(i(),r("p",pe,u(s.description),1)):h("",!0)]),e.$slots.actions?(i(),r("div",ye,[k(e.$slots,"actions")])):h("",!0)]),n("div",be,[n("div",ve,[n("div",xe,[n("div",_e,[n("input",{type:"text",value:s.searchQuery,onInput:t[0]||(t[0]=l=>e.$emit("search",l.target.value)),placeholder:s.searchPlaceholder,class:"block w-full pl-10 pr-4 py-2.5 text-sm border border-gray-300 rounded-lg bg-white shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400"},null,40,we),t[6]||(t[6]=n("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[n("i",{"data-lucide":"search",class:"w-4 h-4 text-gray-400"})],-1)),s.searchQuery?(i(),r("div",Ce,[n("button",{onClick:t[1]||(t[1]=l=>e.$emit("search","")),class:"p-1 text-gray-400 hover:text-gray-600 transition-colors duration-200",type:"button"},[...t[5]||(t[5]=[n("i",{"data-lucide":"x-circle",class:"w-4 h-4"},null,-1)])])])):h("",!0)])]),n("div",ke,[s.hasSelectedItems?(i(),r("div",$e,[n("button",{onClick:t[2]||(t[2]=l=>e.$emit("bulk-delete")),class:"inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-red-600 border border-red-600 rounded-lg hover:bg-red-700 focus:ring-2 focus:ring-red-500 focus:outline-none transition-colors duration-200"},[t[7]||(t[7]=n("i",{"data-lucide":"trash-2",class:"w-4 h-4 mr-1.5"},null,-1)),T(" Delete ("+u(s.selectedCount)+") ",1)])])):h("",!0),k(e.$slots,"extra-actions"),n("button",{onClick:t[3]||(t[3]=l=>e.$emit("refresh")),class:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors duration-200",title:"Refresh data"},[...t[8]||(t[8]=[n("i",{"data-lucide":"rotate-cw",class:"w-4 h-4"},null,-1)])]),s.showExport?(i(),r("button",{key:1,onClick:t[4]||(t[4]=l=>e.$emit("export")),class:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-colors duration-200"},[...t[9]||(t[9]=[n("i",{"data-lucide":"download",class:"w-4 h-4 mr-1.5"},null,-1),T(" Export ",-1)])])):h("",!0)])])])])}const Ae=y(me,[["render",Se]]),Ie={name:"TablePagination",props:{pagination:{type:Object,required:!0},pageNumbers:{type:Array,default:()=>[]}},emits:["change-page"]},De={key:0,class:"data-table__pagination"},Te={class:"flex-1 flex justify-between sm:hidden"},Ee={key:1,class:"btn btn-secondary opacity-50 cursor-not-allowed"},Pe={key:3,class:"btn btn-secondary opacity-50 cursor-not-allowed"},je={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Be={class:"text-sm text-gray-700"},Ne={class:"font-medium"},Le={class:"font-medium"},Re={class:"font-medium"},Oe={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Me={key:1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-gray-50 text-sm font-medium text-gray-400 cursor-not-allowed"},Ve={key:0,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-indigo-50 text-sm font-medium text-indigo-600"},qe=["onClick"],Fe={key:2,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Ue={key:3,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-gray-50 text-sm font-medium text-gray-400 cursor-not-allowed"};function ze(e,t,s,o,c,a){return s.pagination.last_page>1?(i(),r("div",De,[n("div",Te,[s.pagination.current_page>1?(i(),r("button",{key:0,onClick:t[0]||(t[0]=l=>e.$emit("change-page",s.pagination.current_page-1)),class:"btn btn-secondary"}," Previous ")):(i(),r("span",Ee," Previous ")),s.pagination.current_page<s.pagination.last_page?(i(),r("button",{key:2,onClick:t[1]||(t[1]=l=>e.$emit("change-page",s.pagination.current_page+1)),class:"btn btn-secondary"}," Next ")):(i(),r("span",Pe," Next "))]),n("div",je,[n("div",null,[n("p",Be,[t[4]||(t[4]=T(" Showing ",-1)),n("span",Ne,u(s.pagination.from),1),t[5]||(t[5]=T(" to ",-1)),n("span",Le,u(s.pagination.to),1),t[6]||(t[6]=T(" of ",-1)),n("span",Re,u(s.pagination.total),1),t[7]||(t[7]=T(" results ",-1))])]),n("div",null,[n("nav",Oe,[s.pagination.current_page>1?(i(),r("button",{key:0,onClick:t[2]||(t[2]=l=>e.$emit("change-page",s.pagination.current_page-1)),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},[...t[8]||(t[8]=[n("i",{class:"bi-chevron-left"},null,-1)])])):(i(),r("span",Me,[...t[9]||(t[9]=[n("i",{class:"bi-chevron-left"},null,-1)])])),(i(!0),r(E,null,P(s.pageNumbers,l=>(i(),r(E,{key:l},[l===s.pagination.current_page?(i(),r("button",Ve,u(l),1)):l!=="..."?(i(),r("button",{key:1,onClick:m=>e.$emit("change-page",l),class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50"},u(l),9,qe)):(i(),r("span",Fe," ... "))],64))),128)),s.pagination.current_page<s.pagination.last_page?(i(),r("button",{key:2,onClick:t[3]||(t[3]=l=>e.$emit("change-page",s.pagination.current_page+1)),class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},[...t[10]||(t[10]=[n("i",{class:"bi-chevron-right"},null,-1)])])):(i(),r("span",Ue,[...t[11]||(t[11]=[n("i",{class:"bi-chevron-right"},null,-1)])]))])])])])):h("",!0)}const Qe=y(Ie,[["render",ze]]);const He={name:"LoadingState",props:{message:{type:String,default:"Loading data..."},showProgress:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)}},computed:{sizeClasses(){const e={small:{container:"py-8 px-4",spinner:"w-8 h-8",icon:"w-4 h-4",text:"text-xs",dots:"w-1.5 h-1.5"},medium:{container:"py-12 px-4",spinner:"w-12 h-12",icon:"w-5 h-5",text:"text-sm",dots:"w-2 h-2"},large:{container:"py-16 px-6",spinner:"w-16 h-16",icon:"w-6 h-6",text:"text-base",dots:"w-3 h-3"}};return e[this.size]||e.medium}}},Ge={class:"data-table__loading"},We={class:"relative"},Ke={class:"flex items-center justify-center"},Xe={key:0,class:"mt-6 w-48 h-1 bg-gray-200 rounded-full overflow-hidden"};function Ye(e,t,s,o,c,a){return i(),r("div",Ge,[n("div",{class:f(["flex flex-col items-center justify-center",a.sizeClasses.container])},[n("div",We,[n("div",{class:f([a.sizeClasses.spinner,"border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"])},null,2),n("div",{class:f([a.sizeClasses.spinner,"absolute inset-0 border-4 border-transparent border-l-blue-300 rounded-full animate-spin animation-delay-150"])},null,2)]),n("div",Ke,[n("p",{class:f([a.sizeClasses.text,"font-medium text-gray-600 text-center"])},u(s.message),3)]),s.showProgress?(i(),r("div",Xe,[...t[0]||(t[0]=[n("div",{class:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full animate-pulse"},null,-1)])])):h("",!0)],2)])}const Je=y(He,[["render",Ye],["__scopeId","data-v-626fd447"]]),Ze={name:"ErrorState",props:{message:{type:String,default:"Something went wrong. Please try again."},showRetry:{type:Boolean,default:!0}},emits:["retry"]},et={class:"data-table__error"},tt={class:"text-red-500"},st={class:"mt-2"};function nt(e,t,s,o,c,a){return i(),r("div",et,[n("div",tt,[t[2]||(t[2]=n("i",{class:"bi-exclamation-triangle text-2xl"},null,-1)),n("p",st,u(s.message),1),s.showRetry?(i(),r("button",{key:0,onClick:t[0]||(t[0]=l=>e.$emit("retry")),class:"mt-4 btn btn-danger"},[...t[1]||(t[1]=[n("i",{class:"bi-arrow-clockwise mr-2"},null,-1),T(" Retry ",-1)])])):h("",!0)])])}const at=y(Ze,[["render",nt]]),it={name:"EmptyState",props:{title:{type:String,default:"No items found"},description:{type:String,default:"Get started by creating a new item"},iconClass:{type:String,default:"bi-inbox"}}},rt={class:"data-table__empty-state"},ot={class:"flex flex-col items-center"},lt={class:"mt-2 text-lg font-medium"},dt={class:"text-sm"};function ct(e,t,s,o,c,a){return i(),r("div",rt,[n("div",ot,[n("i",{class:f([s.iconClass,"icon"])},null,2),n("p",lt,u(s.title),1),n("p",dt,u(s.description),1),k(e.$slots,"actions")])])}const ut=y(it,[["render",ct]]),mt={name:"MessageToast",props:{message:{type:Object,required:!0},messageClasses:{type:Object,default:()=>({})},messageIconClass:{type:String,default:""}},emits:["hide"]},gt={class:"toast__content"},ht={class:"flex items-start"},ft={class:"flex-shrink-0"},pt={class:"ml-3 w-0 flex-1 pt-0.5"},yt={class:"text-sm font-medium text-gray-900"},bt={class:"ml-4 flex-shrink-0 flex"};function vt(e,t,s,o,c,a){return s.message.show?(i(),r("div",{key:0,class:f([s.messageClasses,"toast"])},[n("div",gt,[n("div",ht,[n("div",ft,[n("i",{class:f(s.messageIconClass)},null,2)]),n("div",pt,[n("p",yt,u(s.message.text),1)]),n("div",bt,[n("button",{onClick:t[0]||(t[0]=l=>e.$emit("hide")),class:"toast__close"},[...t[1]||(t[1]=[n("span",{class:"sr-only"},"Close",-1),n("i",{class:"bi-x text-xl"},null,-1)])])])])])],2)):h("",!0)}const xt=y(mt,[["render",vt]]),_t={name:"ActionButton",props:{action:{type:Object,required:!0},item:{type:Object,required:!0},showLabel:{type:Boolean,default:!0}},emits:["click"],computed:{isDisabled(){if(!this.item)return!0;if(typeof this.action.disabled=="function")return this.action.disabled(this.item);if(typeof this.action.disabled=="boolean")return this.action.disabled;if(this.action.disableIf){if(typeof this.action.disableIf=="function")return this.action.disableIf(this.item);if(typeof this.action.disableIf=="string")return!!this.item[this.action.disableIf]}return!1},buttonClasses(){const e="inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 border",t={primary:"bg-blue-600 text-white border-blue-600 hover:bg-blue-700 focus:ring-blue-500",danger:"bg-red-600 text-white border-red-600 hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white border-green-600 hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-500 text-white border-yellow-500 hover:bg-yellow-600 focus:ring-yellow-500",secondary:"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200 focus:ring-gray-500",default:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50 focus:ring-indigo-500"},s=t[this.action.variant]||t.default,o=this.isDisabled?"opacity-50 cursor-not-allowed":"hover:shadow-md active:scale-95",c=Array.isArray(this.action.classes)?this.action.classes.join(" "):this.action.classes||"";return`${e} ${s} ${o} ${c}`.trim()}},methods:{handleClick(){if(!this.isDisabled){if(this.action.confirm){const e=this.action.confirmMessage||`Are you sure you want to ${this.action.label.toLowerCase()} this item?`;if(!confirm(e))return}if(typeof this.action.handler=="function")try{this.action.handler(this.item,this.action);return}catch(e){console.error("Error in action handler:",e)}this.$emit("click",{action:this.action.name,actionConfig:this.action,item:this.item})}}}},wt=["title","disabled"],Ct=["data-lucide"],kt={key:0,class:"ml-1.5 hidden sm:inline"};function $t(e,t,s,o,c,a){return i(),r("button",{onClick:t[0]||(t[0]=(...l)=>a.handleClick&&a.handleClick(...l)),class:f(a.buttonClasses),title:s.action.tooltip||s.action.label,disabled:a.isDisabled,type:"button"},[n("i",{"data-lucide":s.action.icon,class:"w-4 h-4"},null,8,Ct),s.showLabel?(i(),r("span",kt,u(s.action.label),1)):h("",!0)],10,wt)}const St=y(_t,[["render",$t]]),At={name:"ImageColumn",props:{value:{type:[String,null],default:null},column:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{imageClasses(){return["h-10","w-10","rounded-full","object-cover"]},placeholderClasses(){return["h-10","w-10","bg-gray-200","rounded-full","flex","items-center","justify-center"]},placeholderIcon(){return"image"}}},It={class:"flex items-center"},Dt=["src","alt"],Tt=["data-lucide"];function Et(e,t,s,o,c,a){return i(),r("div",It,[s.value?(i(),r("img",{key:0,src:s.value,alt:s.column.label,class:f(a.imageClasses)},null,10,Dt)):(i(),r("div",{key:1,class:f(a.placeholderClasses)},[n("i",{"data-lucide":a.placeholderIcon,class:"w-5 h-5 text-gray-400"},null,8,Tt)],2))])}const Pt=y(At,[["render",Et]]),jt={name:"BadgeColumn",props:{value:{type:[String,Number,Boolean],default:""},column:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{displayValue(){return this.value===1||this.value==="active"?"Active":this.value===0||this.value==="inactive"?"Inactive":this.value==="pending"?"Pending":this.value==="draft"?"Draft":this.value==="published"?"Published":this.value==="archived"?"Archived":String(this.value)},badgeClasses(){const e=["inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],t=this.getColorClass();return e.push(...t.split(" ")),e}},methods:{getColorClass(){return this.value==="active"||this.value===1?"bg-green-100 text-green-800":this.value==="inactive"||this.value===0?"bg-red-100 text-red-800":this.value==="pending"?"bg-yellow-100 text-yellow-800":this.value==="draft"?"bg-gray-100 text-gray-800":this.value==="published"?"bg-green-100 text-green-800":this.value==="archived"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}}};function Bt(e,t,s,o,c,a){return i(),r("span",{class:f(a.badgeClasses)},u(a.displayValue),3)}const G=y(jt,[["render",Bt]]),Nt={name:"DateColumn",props:{value:{type:[String,Date,null],default:null},column:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{textClasses(){return this.column.type==="datetime"?["text-gray-500","text-sm","font-mono"]:["text-gray-900","text-sm"]},formattedDate(){if(!this.value||this.value==="Never")return"Never";try{const e=new Date(this.value);return this.column.type==="datetime"?e.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid Date"}}}};function Lt(e,t,s,o,c,a){return i(),r("span",{class:f(a.textClasses)},u(a.formattedDate),3)}const W=y(Nt,[["render",Lt]]),Rt={name:"TextColumn",props:{value:{type:[String,Number,null],default:""},column:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{textClasses(){return this.column.type==="number"?["text-gray-900","text-sm","font-mono","text-right"]:this.column.type==="currency"?["text-gray-900","text-sm","font-mono","text-right","font-medium"]:["text-gray-900","text-sm"]},formattedValue(){return this.value===null||this.value===void 0||this.value===""?"":this.column.type==="currency"&&typeof this.value=="number"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(this.value):this.column.type==="number"&&typeof this.value=="number"?new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}).format(this.value):String(this.value)}}};function Ot(e,t,s,o,c,a){return i(),r("span",{class:f(a.textClasses)},u(a.formattedValue),3)}const R=y(Rt,[["render",Ot]]),Mt={name:"ActionColumn",props:{value:{type:[String,Array],default:null},column:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{actions(){return this.column.actions?this.column.actions:[{name:"view",type:"view",icon:"bi-eye",title:"View Details",route:this.column.viewRoute},{name:"edit",type:"edit",icon:"bi-pencil",title:"Edit",route:this.column.editRoute},{name:"delete",type:"delete",icon:"bi-trash",title:"Delete",confirm:!0,confirmMessage:"Are you sure you want to delete this item?"}].filter(e=>e.route||this.column[`${e.name}Handler`]||e.name==="delete")}},methods:{handleAction(e){if(!(e.disabled&&e.disabled(this.item))){if(e.confirm){const t=e.confirmMessage||`Are you sure you want to ${e.name} this item?`;if(!confirm(t))return}if(this.$emit("action",{action:e.name,item:this.item,actionConfig:e}),e.handler&&typeof e.handler=="function"){e.handler(this.item,e);return}if(e.route){const t=this.replaceRouteParams(e.route,this.item);e.external?window.open(t,"_blank"):this.$router.push(t);return}}},replaceRouteParams(e,t){return e.replace(/:(\w+)/g,(s,o)=>t[o]||s)},getDefaultButtonClass(e){const t="text-sm font-medium transition-colors duration-200";switch(e){case"view":return`${t} text-indigo-600 hover:text-indigo-900`;case"edit":return`${t} text-yellow-600 hover:text-yellow-900`;case"delete":return`${t} text-red-600 hover:text-red-900`;default:return`${t} text-gray-600 hover:text-gray-900`}}},emits:["action"]},Vt={class:"flex items-center justify-center space-x-2"},qt=["onClick","title","disabled"],Ft={key:1};function Ut(e,t,s,o,c,a){return i(),r("div",Vt,[(i(!0),r(E,null,P(a.actions,l=>(i(),r("button",{key:l.name,onClick:m=>a.handleAction(l),class:f(l.class||a.getDefaultButtonClass(l.type)),title:l.title||l.label,disabled:l.disabled&&l.disabled(s.item)},[l.icon?(i(),r("i",{key:0,class:f(l.icon)},null,2)):h("",!0),l.label?(i(),r("span",Ft,u(l.label),1)):h("",!0)],10,qt))),128))])}const zt=y(Mt,[["render",Ut]]),K={image:Pt,badge:G,status:G,date:W,datetime:W,text:R,number:R,currency:R,actions:zt,default:R};function Qt(e){return K[e]||K.default}const Ht={actions:{actions:[{name:"view",type:"view",icon:"eye",title:"View Details"},{name:"edit",type:"edit",icon:"pencil",title:"Edit"},{name:"delete",type:"delete",icon:"trash-2",title:"Delete",confirm:!0,confirmMessage:"Are you sure you want to delete this item?"}]}};function Gt(e){return{...Ht[e.type]||{},...e}}const Wt={name:"BaseDataTable",components:{TableHeader:Ae,TablePagination:Qe,LoadingState:Je,ErrorState:at,EmptyState:ut,MessageToast:xt,ActionButton:St},props:{title:{type:String,default:""},description:{type:String,default:""},apiEndpoint:{type:String,required:!0},itemsPerPage:{type:Number,default:10},searchPlaceholder:{type:String,default:"Search..."},selectable:{type:Boolean,default:!0},showExport:{type:Boolean,default:!0},emptyTitle:{type:String,default:"No items found"},emptyDescription:{type:String,default:"Get started by creating a new item"},emptyIcon:{type:String,default:"inbox"},loadingMessage:{type:String,default:"Loading..."},itemIdField:{type:String,default:"id"},columns:{type:Array,default:()=>[]},actions:{type:Array,default:()=>[{name:"edit",label:"Edit",icon:"pencil",variant:"primary",tooltip:"Edit item"},{name:"delete",label:"Delete",icon:"trash-2",variant:"danger",tooltip:"Delete item",confirm:!0,confirmMessage:"Are you sure you want to delete this item?"}]},showActions:{type:Boolean,default:!0},actionsWidth:{type:String,default:"200px"}},emits:["export","item-action","column-action","action"],data(){return{searchTimeout:null}},setup(e){const t=ue({apiEndpoint:e.apiEndpoint,itemsPerPage:e.itemsPerPage,autoLoad:!0}),s=w([]),o=w([]),c=w(!1);return ie(()=>t.items.value,a=>{a&&a.length>0&&(s.value=[...a],c.value||(o.value=[...a]))},{immediate:!0}),{...t,originalItems:s,filteredItems:o,isClientSideSearch:c}},computed:{displayItems(){return this.isClientSideSearch?this.filteredItems:this.originalItems},hasItems(){return this.displayItems&&this.displayItems.length>0},processedColumns(){return this.columns.map(e=>Gt(e))},visibleActions(){return this.actions.filter(e=>!e.hidden)},hasActions(){return this.showActions&&this.visibleActions.length>0}},beforeUnmount(){this.searchTimeout&&clearTimeout(this.searchTimeout)},methods:{handleSearch(e){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchQuery=e,!e||e.trim()===""?(this.isClientSideSearch=!1,this.filteredItems=[...this.originalItems]):(this.isClientSideSearch=!0,this.filterItems(e.toLowerCase()))},150)},filterItems(e){this.filteredItems=this.originalItems.filter(t=>this.processedColumns.some(s=>{const o=this.getColumnValue(t,s);return o==null?!1:String(o).toLowerCase().includes(e)}))},handleRefresh(){this.isClientSideSearch=!1,this.searchQuery="",this.filteredItems=[],this.loadData()},getItemId(e){return e[this.itemIdField]},getColumnValue(e,t){const s=t.key.split(".");let o=e;for(const c of s)if(o&&o[c]!==void 0)o=o[c];else return"";return o},getColumnComponent(e){return Qt(e||"text")},getCellClasses(e){const t=["px-6","py-4","whitespace-nowrap","text-sm","border-l","border-gray-100"];switch(e.cellClasses&&(Array.isArray(e.cellClasses)?t.push(...e.cellClasses):t.push(...e.cellClasses.split(" "))),e.width&&(typeof e.width=="string"&&e.width.includes("px")||t.push(`w-${e.width}`)),e.align){case"center":t.push("text-center");break;case"right":t.push("text-right");break;default:t.push("text-left")}return t},getCellStyles(e){const t={};return e.width&&typeof e.width=="string"&&e.width.includes("px")&&(t.width=e.width,t.minWidth=e.width,t.maxWidth=e.width),t},handleColumnAction(e){this.$emit("column-action",e),this.$emit("item-action",e)},handleActionClick(e){const{action:t,actionConfig:s,item:o}=e;console.log("ðŸ”˜ Action Button Clicked:",{actionName:t,actionConfig:s,item:o,timestamp:new Date().toLocaleTimeString()}),this.$emit("action",e),this.$emit("item-action",{action:t,item:o}),console.log("âœ… Events emitted for action:",t)},formatColumnValue(e,t){if(!e&&e!==0)return"";switch(t.type){case"date":return new Date(e).toLocaleDateString();case"badge":return e;case"image":return e;default:return e}},emitItemAction(e,t){this.$emit("item-action",{action:e,item:t})}}},Kt={class:"data-table"},Xt={key:2},Yt={key:1,class:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200"},Jt={class:"overflow-x-auto"},Zt={class:"min-w-full divide-y divide-gray-200"},es={class:"bg-gray-50"},ts={key:0,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12"},ss={class:"flex items-center"},ns=["checked"],as={class:"bg-white divide-y divide-gray-200"},is={key:0,class:"px-6 py-4 whitespace-nowrap w-12"},rs={class:"flex items-center"},os=["value"],ls={key:1,class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium border-l border-gray-100"},ds={class:"flex items-center justify-center space-x-2"};function cs(e,t,s,o,c,a){const l=C("TableHeader"),m=C("LoadingState"),g=C("ErrorState"),$=C("EmptyState"),_=C("ActionButton"),v=C("TablePagination"),M=C("MessageToast");return i(),r("div",Kt,[q(l,{title:s.title,description:s.description,"search-query":e.searchQuery,"search-placeholder":s.searchPlaceholder,"has-selected-items":e.hasSelectedItems,"selected-count":e.selectedItems.length,"show-export":s.showExport,onSearch:a.handleSearch,onRefresh:a.handleRefresh,onBulkDelete:e.bulkDelete,onExport:t[0]||(t[0]=b=>e.$emit("export"))},{actions:A(()=>[k(e.$slots,"header-actions")]),"extra-actions":A(()=>[k(e.$slots,"extra-actions")]),_:3},8,["title","description","search-query","search-placeholder","has-selected-items","selected-count","show-export","onSearch","onRefresh","onBulkDelete"]),e.loading?(i(),D(m,{key:0,message:s.loadingMessage},null,8,["message"])):e.error?(i(),D(g,{key:1,message:e.error,onRetry:e.loadData},null,8,["message","onRetry"])):(i(),r("div",Xt,[a.hasItems?(i(),r("div",Yt,[n("div",Jt,[n("table",Zt,[n("thead",es,[n("tr",null,[s.selectable?(i(),r("th",ts,[n("div",ss,[n("input",{type:"checkbox",checked:e.isAllSelected,onChange:t[1]||(t[1]=(...b)=>e.toggleSelectAll&&e.toggleSelectAll(...b)),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded transition-colors duration-200"},null,40,ns)])])):h("",!0),(i(!0),r(E,null,P(a.processedColumns,b=>(i(),r("th",{key:b.key,class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider border-l border-gray-200"},u(b.label),1))),128)),a.hasActions?(i(),r("th",{key:1,class:"px-6 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider border-l border-gray-200",style:z({width:s.actionsWidth})}," Actions ",4)):h("",!0),k(e.$slots,"table-headers")])]),n("tbody",as,[(i(!0),r(E,null,P(a.displayItems,(b,L)=>(i(),r("tr",{key:a.getItemId(b),class:"hover:bg-gray-50 transition-colors duration-200"},[s.selectable?(i(),r("td",is,[n("div",rs,[re(n("input",{type:"checkbox",value:a.getItemId(b),"onUpdate:modelValue":t[2]||(t[2]=x=>e.selectedItems=x),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded transition-colors duration-200"},null,8,os),[[oe,e.selectedItems]])])])):h("",!0),(i(!0),r(E,null,P(a.processedColumns,x=>(i(),r("td",{key:x.key,class:f(a.getCellClasses(x)),style:z(a.getCellStyles(x))},[(i(),D(le(a.getColumnComponent(x.type)),{value:a.getColumnValue(b,x),column:x,item:b,onAction:a.handleColumnAction},null,40,["value","column","item","onAction"]))],6))),128)),a.hasActions?(i(),r("td",ls,[n("div",ds,[(i(!0),r(E,null,P(a.visibleActions,x=>(i(),D(_,{key:x.name,action:x,item:b,onClick:a.handleActionClick},null,8,["action","item","onClick"]))),128))])])):h("",!0),k(e.$slots,"table-row",{item:b,index:L})]))),128))])])])])):(i(),D($,{key:0,title:s.emptyTitle,description:e.searchQuery?"Try adjusting your search":s.emptyDescription,"icon-class":s.emptyIcon},{actions:A(()=>[k(e.$slots,"empty-actions")]),_:3},8,["title","description","icon-class"])),q(v,{pagination:e.pagination,"page-numbers":e.getPageNumbers(),onChangePage:e.changePage},null,8,["pagination","page-numbers","onChangePage"])])),q(M,{message:e.message,"message-classes":e.messageClasses,"message-icon-class":e.messageIconClass,onHide:e.hideMessage},null,8,["message","message-classes","message-icon-class","onHide"])])}const us=y(Wt,[["render",cs]]),ms={name:"DataTable",components:{BaseDataTable:us},inheritAttrs:!1};function gs(e,t,s,o,c,a){const l=C("BaseDataTable");return i(),D(l,Q(H(e.$attrs)),de({_:2},[P(e.$slots,(m,g)=>({name:g,fn:A($=>[k(e.$slots,g,Q(H($)))])}))]),1040)}const hs=y(ms,[["render",gs]]),fs={name:"SubAdminTable",components:{DataTable:hs},data(){return{roles:[],columns:[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"roles",label:"Role"},{key:"status",label:"Status",type:"badge"},{key:"last_login_at",label:"Last Login",type:"date"},{key:"created_at",label:"Created",type:"date"}]}},mounted(){this.loadRoles()},methods:{async loadRoles(){try{const e=await j.get("/admin/roles");this.roles=e.data}catch(e){console.error("Error loading roles:",e)}},getAvatarUrl(e){return e.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=6366f1&color=ffffff`},getRoleName(e){return e.roles&&e.roles.length>0?e.roles[0].name:"No Role"},getStatus(e){return e.status||"Active"},getStatusBadgeClass(e){const t=this.getStatus(e),s="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium";return t==="Active"?`${s} bg-green-100 text-green-800`:`${s} bg-red-100 text-red-800`},viewSubAdmin(e){window.location.href=`/admin/subadmins/${e}`},editSubAdmin(e){window.location.href=`/admin/subadmins/${e}/edit`},async deleteSubAdmin(e){if(confirm(`Are you sure you want to delete ${e.name}? This action cannot be undone.`))try{await j.delete(`/admin/subadmins/${e.id}`),console.log("Sub-admin deleted successfully")}catch(t){console.error("Error deleting sub-admin:",t)}}}},ps={class:"flex items-center"},ys={class:"flex-shrink-0 h-10 w-10"},bs=["src","alt"],vs={class:"ml-4"},xs={class:"text-sm font-medium text-gray-900"},_s={class:"text-sm text-gray-500"},ws={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Cs={class:"flex items-center justify-end space-x-2"},ks=["onClick"],$s=["onClick"],Ss=["onClick"];function As(e,t,s,o,c,a){const l=C("DataTable");return i(),D(l,{title:"Sub Admins",subtitle:"Manage administrator accounts and their permissions","api-endpoint":"/admin/subadmins",columns:c.columns,"create-route":"/admin/subadmins/create","edit-route":"/admin/subadmins/:id/edit","view-route":"/admin/subadmins/:id","create-text":"Add Sub Admin","search-placeholder":"Search sub-admins...","empty-title":"No sub-admins found","empty-message":"Get started by creating a new sub-admin","empty-icon":"bi-people","loading-message":"Loading sub-admins...",exportable:!0,selectable:!0,actions:!0},{"cell-name":A(({item:m})=>[n("div",ps,[n("div",ys,[n("img",{class:"h-10 w-10 rounded-full object-cover",src:a.getAvatarUrl(m),alt:m.name},null,8,bs)]),n("div",vs,[n("div",xs,u(m.name),1),n("div",_s,u(m.username||m.email),1)])])]),"cell-roles":A(({item:m})=>[n("span",ws,u(a.getRoleName(m)),1)]),"cell-status":A(({item:m})=>[n("span",{class:f(a.getStatusBadgeClass(m))},u(a.getStatus(m)),3)]),actions:A(({item:m})=>[n("div",Cs,[n("button",{onClick:g=>a.viewSubAdmin(m.id),class:"text-indigo-600 hover:text-indigo-900 transition-colors",title:"View Details"},[...t[0]||(t[0]=[n("i",{class:"bi-eye"},null,-1)])],8,ks),n("button",{onClick:g=>a.editSubAdmin(m.id),class:"text-yellow-600 hover:text-yellow-900 transition-colors",title:"Edit"},[...t[1]||(t[1]=[n("i",{class:"bi-pencil"},null,-1)])],8,$s),n("button",{onClick:g=>a.deleteSubAdmin(m),class:"text-red-600 hover:text-red-900 transition-colors",title:"Delete"},[...t[2]||(t[2]=[n("i",{class:"bi-trash"},null,-1)])],8,Ss)])]),_:1},8,["columns"])}const Is=y(fs,[["render",As]]);window.axios=O;const X=document.querySelector('meta[name="csrf-token"]');X?O.defaults.headers.common["X-CSRF-TOKEN"]=X.getAttribute("content"):console.warn("CSRF token meta tag not found");try{const e=ce({components:{"sub-admin-table":Is},mounted(){console.log("SubAdmin Vue app with DataTable mounted successfully")}});document.addEventListener("DOMContentLoaded",function(){console.log("DOM loaded, looking for subadmin-app element...");const t=document.getElementById("subadmin-app");t?(console.log("Found subadmin-app element, mounting Vue app..."),e.mount("#subadmin-app"),t.classList.add("vue-mounted"),console.log("SubAdmin app with new DataTable mounted to #subadmin-app")):console.error('Could not find element with ID "subadmin-app"')})}catch(e){console.error("Error creating Vue app:",e)}
